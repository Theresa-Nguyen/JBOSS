#cloud-config

runcmd:

- subscription-manager register --username <redHatUsername> --password <redHatPassword>
- subscription-manager attach --pool=<rhsmPool>
- subscription-manager repos --enable=jb-eap-7.2-for-rhel-7-server-rpms
- yum groupinstall jboss-eap7 -y
- systemctl enable eap7-standalone.service
- systemctl start  eap7-standalone.service
- /opt/rh/eap7/root/usr/share/wildfly/bin/add-user.sh -u '<jbossuser>' -p '<jbosspswd>' -g 'guest,mgmtgroup'
- firewall-cmd --zone=public --add-port=8080/tcp --permanent 
- firewall-cmd --zone=public --add-port=8180/tcp --permanent 
- firewall-cmd --zone=public --add-port=9990/tcp --permanent 
- firewall-cmd --zone=public --add-port=10090/tcp --permanent 
- firewall-cmd --reload 